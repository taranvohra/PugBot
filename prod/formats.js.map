{"version":3,"sources":["../src/formats.js"],"names":["printServerStatus","info","players","richEmbed","Discord","RichEmbed","xServerQueryProps","remainingTime","teamScores","playerList","parseInt","numplayers","maxteams","minutes","seconds","timelimit","reduce","acc","curr","index","forEach","teamIndex","team","p","teamPlayers","length","addField","teams","spec","desc","mapname","maxplayers","footerText","host","port","setTitle","hostname","setColor","setDescription","setFooter","printServerList","cachedDB","name","printPugJoinStatus","statuses","joinStatus","user","discriminator","activeCount","noPlayers","nf","missed","toUpperCase","joined","aj","username","printPugLeaveStatus","pug","nj","msg","printPugStatuses","i","list","picking","withList","base","u","broadCastFilledPugs","filledPugs","title","body","prev","player","id","footer","broadCastDeadPugs","deadPugs"],"mappings":"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","file":"formats.js","sourcesContent":["import Discord from 'discord.js';\nimport {\n  getPlayerList,\n  getMinutesAndSeconds,\n  padNumberWithZero,\n  getTeamScores,\n  getTeamIndex,\n} from './helpers';\nimport { teams } from './constants';\n\nexport const printServerStatus = ({ info, players }) => {\n  let richEmbed = new Discord.RichEmbed();\n\n  const xServerQueryProps = { remainingTime: null, teamScores: {} };\n  const playerList = getPlayerList(\n    players,\n    parseInt(info.numplayers) || 0,\n    !!info.maxteams\n  );\n\n  // If XServerQuery response, then some more coooooooooool stuff\n  if (info['xserverquery']) {\n    const { minutes, seconds } = getMinutesAndSeconds(\n      parseInt(info['remainingtime'])\n    );\n    const teamScores = getTeamScores(info, info.maxteams);\n\n    xServerQueryProps.remainingTime = `${\n      (minutes === parseInt(info.timelimit) && seconds === 0) ||\n      minutes < parseInt(info.timelimit)\n        ? '**Remaining Time:**'\n        : '**Overtime**:'\n    } ${padNumberWithZero(minutes)}:${padNumberWithZero(seconds)} \\n`;\n    xServerQueryProps.teamScores = Object.keys(teamScores).reduce(\n      (acc, curr) => {\n        const index = getTeamIndex(curr);\n        acc[index] = ` | Score - ${teamScores[curr]}`;\n        return acc;\n      },\n      []\n    );\n  }\n\n  Object.keys(playerList).forEach(team => {\n    const teamIndex = getTeamIndex(team);\n    const p = playerList[team];\n    const teamPlayers = p.reduce((acc, curr) => {\n      acc = acc + curr + ' ' + '\\n';\n      return acc;\n    }, '');\n    p.length > 0\n      ? richEmbed.addField(\n          team + (xServerQueryProps.teamScores[teamIndex] || ``),\n          teamPlayers,\n          team !== teams.spec\n        )\n      : '';\n  });\n\n  const desc =\n    `**Map:** ${info.mapname} \\n **Players:** ${info.numplayers}/${\n      info.maxplayers\n    } \\n ` + (xServerQueryProps.remainingTime || ``);\n  const footerText = `unreal://${info.host}:${info.port}`;\n\n  richEmbed.setTitle(info.hostname);\n  richEmbed.setColor('#838282');\n  richEmbed.setDescription(desc);\n  richEmbed.setFooter(footerText);\n  return richEmbed;\n};\n\nexport const printServerList = cachedDB => {\n  let richEmbed = new Discord.RichEmbed();\n\n  const { desc } = cachedDB.reduce(\n    (acc, curr, index) => {\n      acc.desc += `\\`${index + 1}\\`\\u00A0\\u00A0\\u00A0${curr.name}\\n`;\n      return acc;\n    },\n    {\n      desc: '',\n    }\n  );\n\n  richEmbed.setTitle(`IP\\u00A0\\u00A0\\u00A0Name`);\n  richEmbed.setColor('#838282');\n  richEmbed.setDescription(desc);\n  richEmbed.setFooter('To query, type .q ip');\n  return richEmbed;\n};\n\nexport const printPugJoinStatus = statuses => {\n  const { joined, missed, nf, aj, user } = statuses.reduce(\n    (acc, { joinStatus, user, discriminator, activeCount, noPlayers }) => {\n      switch (joinStatus) {\n        case -1:\n          acc.nf += `No pug found: **${discriminator}**\\n`;\n          break;\n        case 0:\n          acc.missed += `Sorry, **${discriminator.toUpperCase()}** is already filled\\n`;\n          break;\n        case 1:\n          acc.joined += `**${discriminator.toUpperCase()}** (${activeCount}/${noPlayers}) :small_blue_diamond: `;\n          break;\n        case 2:\n          acc.aj += `You have already joined **${discriminator.toUpperCase()}**`;\n          break;\n        default:\n          null;\n      }\n      acc.user = user;\n      return acc;\n    },\n    { joined: ``, missed: ``, nf: ``, aj: ``, user: null }\n  );\n  return `${\n    joined.length > 0\n      ? `${user.username} joined :small_blue_diamond: ${joined}`\n      : ``\n  } ${missed.length > 0 ? `\\n${missed}` : ``} ${\n    aj.length > 0 ? `\\n${aj}` : ``\n  } ${nf.length > 0 ? `\\n${nf}` : ``}`;\n};\n\nexport const printPugLeaveStatus = statuses => {\n  const { joined, nj, user } = statuses.reduce(\n    (acc, { pug, user, discriminator }) => {\n      if (pug) {\n        acc.joined += `**${discriminator.toUpperCase()}** `;\n        acc.user = user;\n      } else acc.nj = `Cannot leave pug(s) you haven't joined :smart:`;\n      return acc;\n    },\n    { user: null, joined: ``, nj: `` }\n  );\n  const msg = `${joined.length > 0 ? `${user.username} left ${joined}` : ``}${\n    nj.length > 0 ? `\\n${nj}` : ``\n  }`;\n\n  return msg || `There are no pugs to leave`;\n};\n\nexport const printPugStatuses = statuses => {\n  const msg = statuses.reduce(\n    (acc, { discriminator, noPlayers, list, picking, withList }, i) => {\n      if (withList) {\n        const base = `**${discriminator.toUpperCase()}** :fire: Players (${\n          picking ? noPlayers : list.length\n        }/${noPlayers}):`;\n        const players = list.reduce((acc, u) => {\n          acc += `*${u.username}* `;\n          return acc;\n        }, ``);\n        acc += `${base} ${players}\\n`;\n        return acc;\n      } else {\n        acc += `${\n          i === 0 ? `:small_blue_diamond` : ``\n        } **${discriminator.toUpperCase()}** (${\n          picking ? noPlayers : list.length\n        }/${noPlayers}) :small_blue_diamond: `;\n        return acc;\n      }\n    },\n    ``\n  );\n\n  return msg || `There are currently no pugs :FeelsBadMan:, try joining one!`;\n};\n\nexport const broadCastFilledPugs = filledPugs => {\n  return filledPugs.reduce((acc, curr) => {\n    const title = `**${curr.discriminator.toUpperCase()}** filled:`;\n    const body = curr.list.reduce((prev, player) => {\n      prev += `<@${player.id}> `;\n      return prev;\n    }, ``);\n    const footer = `Type \\`.captain\\` to become a captain. Random capts will be picked in 30 seconds`;\n    acc += `${title}\\n${body}\\n${footer}\\n`;\n    return acc;\n  }, ``);\n};\n\nexport const broadCastDeadPugs = deadPugs => {\n  return deadPugs.reduce((acc, curr, i) => {\n    acc += `${\n      i > 0 ? `\\n` : ``\n    } :joy_cat: **${curr.discriminator.toUpperCase()}** was stopped because ${\n      curr.user.username\n    } left :joy_cat:`;\n    return acc;\n  }, ``);\n};\n"]}